---


---

<!-- Admin panel -->

<!-- Formulario de carousel -->

<form id="carousel-form" enctype="multipart/form-data" method="POST">
  <label class="text-white">Título:
    <input type="text" class="text-white" name="title" required />
  </label>
  <label class="text-white">Descripción:
    <textarea class="text-white" name="description" required></textarea>
  </label>
  <label class="text-white">Imagen:
    <input type="file" name="image" accept="image/*" required />
  </label>
  <button class="text-white" type="submit">Subir</button>
</form>

<!-- Script carousel admin panel -->

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("carousel-form");

    if (!form) {
      console.warn("Formulario de carrusel no encontrado");
      return;
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(form);

      try {
        const res = await fetch("/api/carousel", {
          method: "POST",
          body: formData, // No establecer Content-Type manualmente
        });

        if (!res.ok) {
          const errorData = await res.json();
          console.error("Error en la creación del carrusel:", errorData.error);
          alert("Error: " + errorData.error);
          return;
        }

        const result = await res.json();
        console.log("Elemento del carrusel creado:", result);
        alert("Elemento creado con éxito.");

        form.reset(); // limpia los campos tras éxito
      } catch (error) {
        console.error("Error inesperado:", error);
        alert("Error inesperado al enviar el formulario.");
      }
    });
  });
</script>

