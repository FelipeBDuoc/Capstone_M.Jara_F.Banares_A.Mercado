---
---
<div>
    <h2>Administración de Posts</h2>
    
    <table class="table-auto w-full border-collapse border border-gray-300">
      <thead>
        <tr class="">
          <th class="border border-gray-300 p-2">ID</th>
          <th class="border border-gray-300 p-2">Título</th>
          <th class="border border-gray-300 p-2">Acciones</th>
        </tr>
      </thead>
    
      <tbody id="posts-container"></tbody>
    </table>
</div>

<script>
async function cargarPosts() {
  const res = await fetch('/api/posts');
  const posts = await res.json();

  const container = document.getElementById("posts-container");
  container.innerHTML = ""; // limpiar

  posts.forEach(post => {
    const row = document.createElement("tr");

    // ID
    const tdId = document.createElement("td");
    tdId.textContent = post.id;
    tdId.className = "border border-gray-300 p-2";

    // TÍTULO
    const tdTitle = document.createElement("td");
    tdTitle.textContent = post.title;
    tdTitle.className = "border border-gray-300 p-2";

    // ACCIONES
    const tdActions = document.createElement("td");
    tdActions.className = "border border-gray-300 p-2";

    const btn = document.createElement("button");
    btn.textContent = "Eliminar";
    btn.type = "button";
    btn.onclick = () => eliminarPost(post.id);

    tdActions.appendChild(btn);

    row.appendChild(tdId);
    row.appendChild(tdTitle);
    row.appendChild(tdActions);

    container.appendChild(row);
  });
}

async function eliminarPost(id) {
  if (!confirm("¿Eliminar este post?")) return;

    const res = await fetch(`/api/posts/${id}`, {
      method: "DELETE"
    });
    if (res.ok) {
      alert("Post eliminado");
      location.reload();
    } else {
      alert("Error al eliminar");
    }
}
cargarPosts();
</script>